<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mike Jarrett (Posts about mobi)</title><link>https://notes.mikejarrett.ca/</link><description></description><atom:link href="https://notes.mikejarrett.ca/categories/cat_mobi.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2020 &lt;a href="mailto:mike@mikejarrett.ca"&gt;Mike Jarrett&lt;/a&gt; </copyright><lastBuildDate>Mon, 20 Jan 2020 03:16:21 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Tracking bikeshare use using GBFS feeds</title><link>https://notes.mikejarrett.ca/tracking-bikeshare-use-using-gbfs-feeds/</link><dc:creator>Mike Jarrett</dc:creator><description>&lt;figure&gt;&lt;img src="https://notes.mikejarrett.ca/images/logo.png"&gt;&lt;/figure&gt; &lt;div class="cell border-box-sizing text_cell rendered"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;The &lt;a href="https://github.com/NABSA/gbfs"&gt;General Bikeshare Feed Specification (GBFS)&lt;/a&gt; is a popular standard for publishing live data about bikeshare systems used by systems &lt;a href="https://github.com/NABSA/gbfs/blob/master/systems.csv"&gt;around the globe&lt;/a&gt;. Its stated purpose is to allow 3rd party applications to interface with the live data and allow municipalities to monitor compliance with local regulations. For my purpose, it also allows me to monitor system usage in real time. Here I'll go through the steps I use to track bikeshare usage in real time using GBFS feeds. I currently publish live tracking of Vancouver bikeshare systems at &lt;a href="http://twitter.com/vanbikesharebot"&gt;@VanBikeShareBot&lt;/a&gt; and will soon be adding tracking of Toronto, Hamilton and Montreal systems.&lt;/p&gt;
&lt;p&gt;I've bundled the tools I use for GBFS monitoring into a python package that can be &lt;a href="https://github.com/mjarrett/bikedata"&gt;found on Github&lt;/a&gt;. The Bikedata package is not a full-service GBFS client -- for that, you might prefer &lt;a href="https://pypi.org/project/gbfs-client/"&gt;GBFS-client&lt;/a&gt;. Bikedata provides minimal functionality for querying GBFS feeds and returning Pandas dataframes, and implements some helper functions for persistent monitoring of bikeshare systems.&lt;/p&gt;
&lt;h3 id="The-GBFS-spec"&gt;The GBFS spec&lt;a class="anchor-link" href="https://notes.mikejarrett.ca/tracking-bikeshare-use-using-gbfs-feeds/#The-GBFS-spec"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;I won't go into detail about the GBFS spec, more information can be found on the project's &lt;a href="https://github.com/NABSA/gbfs"&gt;Github page&lt;/a&gt;. Suffice to say that a GBFS complient system offers several distinct JSON endpoints that provide information about the system. For example, Mobi Bikes in Vancouver provides:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://vancouver-gbfs.smoove.pro/gbfs/gbfs.json"&gt;https://vancouver-gbfs.smoove.pro/gbfs/gbfs.json&lt;/a&gt;: A list of available feeds&lt;/li&gt;
&lt;li&gt;&lt;a href="https://vancouver-gbfs.smoove.pro/gbfs/en/system_information.json"&gt;https://vancouver-gbfs.smoove.pro/gbfs/en/system_information.json&lt;/a&gt;: General system information&lt;/li&gt;
&lt;li&gt;&lt;a href="https://vancouver-gbfs.smoove.pro/gbfs/en/station_information.json"&gt;https://vancouver-gbfs.smoove.pro/gbfs/en/station_information.json&lt;/a&gt;: Details about stations (short and long names, location, coordinates)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://vancouver-gbfs.smoove.pro/gbfs/en/station_status.json"&gt;https://vancouver-gbfs.smoove.pro/gbfs/en/station_status.json&lt;/a&gt;: Live status of stations (bikes available, free docks)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mobi doesn't have free floating bikes, but systems that do also have a &lt;code&gt;free_bikes.json&lt;/code&gt; feed providing the location of available free floating bikes.&lt;/p&gt;
&lt;h3 id="Tracking-station-based-systems"&gt;Tracking station-based systems&lt;a class="anchor-link" href="https://notes.mikejarrett.ca/tracking-bikeshare-use-using-gbfs-feeds/#Tracking-station-based-systems"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Many bikeshare systems, especially those in dense city centres, only allow trips to begin and end at physical stations. To monitor these systems, I periodically query the &lt;code&gt;station_status.json&lt;/code&gt; and record the number of bikes at each station. If the number of available bikes decreases by N, I count that as N departures from the station. If it increases by M, I count that as M bikes returned.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://notes.mikejarrett.ca/tracking-bikeshare-use-using-gbfs-feeds/"&gt;Read more…&lt;/a&gt; (37 min remaining to read)&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description><category>bikes</category><category>mobi</category><guid>https://notes.mikejarrett.ca/tracking-bikeshare-use-using-gbfs-feeds/</guid><pubDate>Mon, 20 Jan 2020 01:12:56 GMT</pubDate></item></channel></rss>